<% content_for :game_start do %>
	<script type="text/javascript">
		ChuClone.model.Constants.SERVER.ASSET_PREFIX = "game/";
		<%= render :partial => "game/game_init", :locals => { :level => @level } %>
	</script>
<% end %>

<% content_for :game_style do %>
    <%= render :partial => "game/style" %>
<% end %>


<div class="container_12">
	<%= render :partial => "game/title" %>
	<%= render :partial => "game/login" %>

    <%= render :partial => "game/socialmedia" %>
    <div class="jura_14 grid_2" style="color: #7595FF; z-index:1; box-shadow: 3px 3px 3px #CCC; position: absolute; top: -5px; left: 10px; padding: 8px 0 4px 0; background-color: #52F3FF;text-align: center; ">
    <a href="http://twitter.com/1dayitwillmake"><span style="color:#7595ff">@1dayitwillmake</span></a>
</div>
    
    <div class="clear"></div>
	<%= render :partial => "game/colored_rectangles" %>

    <div class="jura_36 grid_4">
        <p class="grayBorder" id="leveltitle"><%= @level.title == APP_CONFIG["DEFAULTS"]["TITLE_SCREEN_LEVEL"] ? "LevelName" : @level.title %></p>
    </div>
	<div class="jura_16 grid_2" style="padding-top: 10px;" id="fullscreen_toggle">
        <p class="grayBorder"> Full Screen </p>
    </div>
	<div class="jura_16 grid_2" style="padding-top: 10px;" id="instructions_toggle">
        <p class="grayBorder"> Instructions </p>
    </div>

    <div class="grid_4 omega" id="HUDTime">00.0 secs</div>
    <div class="clear"></div>
	<%#=render :partial => "game/level_recap" %>

    <div id="gameContainer" class="grid_12"></div>
    <div class="clear"></div>
    <div class="grid_12" style="height: 20px"></div>
    <div class="clear"></div>
    <div class="grid_6">
        <p class="grayBorder jura_36">
            Select Level
        </p>
        <!--    BEGIN LEVEL LIST -->
       <div id="levellisting">
            <% count = 0 %>
            <% perRow = 3 %>
            <% @levels.each do |level| %>
                <% count = count + 1 %>
			   	<% does_have_highscore = has_highscore(@user_scores, level.id) %>
                <% css_class = count % perRow == 0 ? "levelThumbnailOmega" : "levelThumbnail" %>
			   	<% border_style = does_have_highscore ? "greenBorder" : "grayBorder" %>
			   	<% style = 'style=\'background-image: url("/game/assets/images/page/completed_level_bg_0' + '.png");\''.html_safe if does_have_highscore %>
			   	<% style ||= "".html_safe %>
                <%= "\t<div data-location='' data-id='#{level.id}' class='grid_2 #{css_class}' #{style}><p>#{level.title}</p></div>".html_safe %>
            <% end %>
       </div>
        <!--    END LEVEL LIST -->
    </div>
	<div class="grid_6">
		<div class="grid_6">
			<p class="grayBorder jura_36">Level Information </p>
		</div>

		<div class="grid_6">
			<div class="grid_2 grayBorder alpha jura_13" style="text-align: center;">AUTHOR</div>
			<div class="grid_4 grayBorder alpha jura_13 omega" style="text-align: center;padding-right:6px" id="author"><%= @level.user.name %></div>
		</div>
		<div class="clear"></div>
		<div class="grid_6" style="margin-top:10px">
			<div class="grid_2 grayBorder alpha jura_13" style="text-align: center;">COMPLETION RATE</div>
			<div class="grid_4 grayBorder alpha jura_13 omega" style="text-align: center;padding-right:6px"><%= (@level.times_played/@level.times_completed * 100) %>% Completion rate</div>
		</div>
		<div class="grid_6" style="margin-top:38px">
			<p class="grayBorder jura_36">Best Times</p>
		</div>
			<div id="score_container" data-id=<%= "#{@level.id}".html_safe %> style="overflow-y:hidden;" class="grid_6" style="margin-top:0">
				<%= render :partial => "game/score" %>
			</div>
		</div>
<div class="margin_top_1 clear">a</div>
<% if false %>

        <div class="grid_6">
            <p class="grayBorder jura_36">
                User Levels
            </p>
        </div>
        <div class="clear"></div>
    <% end %>

<%= render :partial => "game/footer" %>
</div>